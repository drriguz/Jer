plugins {
    id 'java'
    id 'antlr'
}

group 'com.riguz'
version '1.0-SNAPSHOT'

repositories {
    maven {
        url 'https://maven.aliyun.com/repository/public/'
    }
    mavenLocal()
    mavenCentral()
}

dependencies {
    antlr 'org.antlr:antlr4:4.9.1'
    implementation group: 'org.ow2.asm', name: 'asm', version: '9.1'
    implementation group: 'org.ow2.asm', name: 'asm-util', version: '9.1'
    implementation group: 'org.apache.commons', name: 'commons-text', version: '1.9'
    implementation group: 'org.apache.commons', name: 'commons-lang3', version: '3.12.0'

    testImplementation group: 'junit', name: 'junit', version: '4.13.2'
}

generateGrammarSource {
    /* see
     * https://stackoverflow.com/questions/40995727/gradle-cant-find-antlr-token-file/49388412
     */

    maxHeapSize = "64m"
    arguments += ["-visitor", "-long-messages", "-package", "com.riguz.jer.antlr.generated"]
    outputDirectory = new File(buildDir.toString() + "/generated-src/antlr/main/com/riguz/jer/antlr/generated")
}